<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity6">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[[${site.configTitle}]] [[${site.configSub}]]</title>
    <link rel="stylesheet" as="style" crossorigin th:href="@{https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css}" /> <!-- 가변 다이나믹 서브셋 (fontfamily : pretendard) -->
    <link rel="shortcut icon" th:href="@{'/file/'+${site.configFabicon}}">
    <link th:href="@{/css/reset.css}" rel="stylesheet">
    <link th:href="@{/css/main.css}" rel="stylesheet">
    <script th:src="@{/js/axios.min.js}"></script>
    <link th:href="@{https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css}" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous"/>
    <script th:src="@{https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js}" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script th:src="@{https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js}"></script>
    <script defer th:src="@{/js/postVisitor.js}"></script>
</head>
    <body>
    <header id="header">
        <div id="headerIn">
            <h1 class="logo">
                <a style="z-index: 2; position: relative; top: 13px;" th:href="@{/}"><img th:src="@{'/file/'+${site.configHeaderLogo}}" alt="LotteON logo"></a>
            </h1>
            <div class="utill">
                <ul>
                    <li sec:authorize="!isAuthenticated()">
                        <a th:href="@{/auth/login/view}">로그인</a>
                    </li>
                    <li sec:authorize="isAuthenticated()">
                        <a th:href="@{/auth/logout}">로그아웃</a>
                    </li>
                    <li sec:authorize="!isAuthenticated()">
                        <a th:href="@{/auth/join}">회원가입</a></li>
                     <li sec:authorize="hasRole('customer')">
                         <a th:href="@{/my/index}">마이페이지</a></li>
<!--                      마이페이지 로그인 시 확인가능 -->
                    <li sec:authorize="hasRole('customer')"
                        ><a th:href="@{/prod/cart}">장바구니</a></li>
                    <li
                        ><a th:href="@{/cs/index}">고객센터</a></li>
                    <li  sec:authorize="hasRole('admin')"
                        ><a th:href="@{/admin/config/index}">관리자</a></li>
                    <li  sec:authorize="hasRole('seller')"
                        ><a th:href="@{/admin/prod/products}">판매자</a></li>
                </ul>
            </div><!--.utill-->
            <nav class="gnb">
            </nav><!--.gnb-->
            <div style="z-index: 2;" class="search">
                <input type="text" id="search" name="search" placeholder="어떤 상품을 찾으세요?">
                <label for="search"></label><a href="#" class="ico_sch"><img th:src="@{/images/ico_search.png}" alt="검색하기"></a>
            </div><!--.search-->
        </div><!--.headerIn-->
        <div style="
                display: flex;
                gap: 25px;
                justify-content: flex-end;
                margin-right: 150px;
                position: relative;
                top: -18px;"
        >
            
            <a sec:authorize="!hasRole('admin')" th:href="@{/my/index}"><img class="img-header-link" th:src="@{/images/header-my.png}" style="width: 50px; height: 50px;"></a>
            <a sec:authorize="!hasRole('admin')" th:href="@{/prod/cart}"><img class="img-header-link" th:src="@{/images/header-cart.png}" style="width: 50px; height: 50px;"></a>
            <a sec:authorize="!hasRole('admin')"><img class="img-header-link" th:src="@{/images/header-zzim.png}" style="width: 50px; height: 50px;"></a>
        </div>

    </header><!--#header-->
</body>

<script>
    $(document).ready(function(){
        var slider = $('.searchslider').bxSlider({
            mode: 'vertical',
            auto: true, // 자동 슬라이드
            pause: 3000, // 슬라이드 간의 대기 시간 (밀리초)
            pager: true, // 페이지 네비게이션 표시
            controls: true, // 이전/다음 버튼 표시
            nextText: '다음', // 다음 버튼 텍스트
            prevText: '이전', // 이전 버튼 텍스트
            touchEnabled: (navigator.maxTouchPoints > 0)
        });
        $('.bx-wrapper').hover(
            function() {
                $(this).find('.bx-viewport').css('overflow', 'visible');
            },
            function() {
                $(this).find('.bx-viewport').css('overflow', 'hidden');
            }
        );
    });

    // function hoverPopular(){
    //     document.querySelector('.popular-box').style.display='flex'
    // }
    //
    // function outPopular(){
    //     document.querySelector('.popular-box').style.display='none'
    // }
    var isHovering = false; // 상태 변수를 추가하여 마우스 오버 여부를 추적

    function hoverPopular() {
        isHovering = true; // 마우스 오버 상태로 설정
        $('.popular-box').show(); // 검색어 창 표시
    }

    function outPopular() {
        if (!isHovering) {
            $('.popular-box').hide(); // 마우스가 벗어나면 검색어 창 닫기
        }
    }

    // 검색어 창에 마우스 오버 시 상태 변경
    $('.popular-box').on('mouseover', function() {
        isHovering = true;
    });

    // 검색어 창에 마우스 아웃 시 상태 변경
    $('.popular-box').on('mouseleave', function() {
        isHovering = false;
        $('.popular-box').hide(); // 마우스가 벗어나면 검색어 창 닫기
    });
</script>